<!DOCTYPE html>
<html>
<head>
    <title>Nextzen Metro Extracts</title>
</head>
<body>
    <h1>Nextzen Metro Extracts</h1>

    <p>This data was generated from an OpenStreetMap data dump updated to {{ planet_timestamp }}.</p>

    {% for region_name, countries in feature_tree.items() %}
    <h2>{{ region_name }}</h2>
    {% for country_name, metros in countries.items() %}
    {% for metro_name, feature in metros.items() %}
    <a href="#{{ feature['id'] }}">{{ metro_name }}, {{ country_name }}</a>
    {% endfor %}
    {% endfor %}
    {% endfor %}

    <hr>

    {% for region_name, countries in feature_tree.items() %}
    <h2><a name="{{ region_name }}">{{ region_name }}</a></h2>
    {% for country_name, metros in countries.items() %}
    <h3><a name="{{ country_name }}">{{ country_name }}</a></h3>
    {% for metro_name, feature in metros.items() %}
    <h4><a name="{{ feature['id'] }}">{{ metro_name }}</a></h4>
    <ul>
        {% for suffix, typename in file_type_infos.items() %}
        {% set finfo = feature['properties'].get(suffix) %}
        {% if finfo %}
        {% set fsize = finfo.get('size') %}
        <li><a href="{{ finfo.get('url') }}">{{ typename }}</a> ({{ fsize }} bytes)</li>
        {% else %}
        <li>{{ typename }} (missing?)</li>
        {% endif %}
        {% endfor %}
    </ul>
    {% endfor %}
    {% endfor %}
    {% endfor %}
</body>
</html>
